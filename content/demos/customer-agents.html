<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analisi Contrattuale Intelligente — Praxis AI Demo</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --navy: #0f172a;
  --navy-light: #1e3a5f;
  --navy-muted: #334155;
  --silver: #94a3b8;
  --surface: #f0f4f8;
  --surface-light: #f8fafc;
  --surface-dark: #e2e8f0;
  --ice: #fafbfd;
  --border: #cbd5e1;
  --white: #ffffff;
  --accent-green: #16a34a;
  --accent-amber: #d97706;
  --accent-red: #dc2626;
  --font-body: 'Inter', system-ui, sans-serif;
  --font-display: 'Caveat', cursive;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: var(--font-body);
  background: var(--ice);
  color: var(--navy);
  min-height: 100vh;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

/* ── Header ── */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  background: var(--white);
  border-bottom: 1px solid var(--border);
}
.header-left { display: flex; align-items: center; gap: 16px; }
.logo {
  font-family: var(--font-display);
  font-size: 22px;
  font-weight: 700;
  color: var(--navy);
}
.demo-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--navy-muted);
}
.demo-badge {
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1.5px;
  color: var(--navy-light);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 3px 8px;
}

/* ── Progress Bar ── */
.progress-wrap {
  background: var(--surface-dark);
  height: 4px;
  width: 100%;
  position: relative;
}
.progress-fill {
  height: 100%;
  background: var(--navy-light);
  transition: width 0.6s cubic-bezier(.4,0,.2,1);
  width: 25%;
}
.progress-label {
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--silver);
  padding: 8px 0 4px;
}

/* ── Main Area ── */
.main {
  max-width: 960px;
  margin: 0 auto;
  padding: 20px 16px 80px;
  position: relative;
  min-height: calc(100vh - 100px);
}

/* ── Step Container ── */
.step {
  display: none;
  opacity: 0;
  transform: translateY(12px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
.step.active { display: block; }
.step.visible { opacity: 1; transform: translateY(0); }

/* ── Next Button ── */
.next-btn {
  display: block;
  margin: 28px auto 0;
  padding: 10px 32px;
  font-family: var(--font-body);
  font-size: 14px;
  font-weight: 600;
  color: var(--white);
  background: var(--navy-light);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s, transform 0.15s;
}
.next-btn:hover { background: var(--navy); transform: translateY(-1px); }
.next-btn:active { transform: translateY(0); }

/* ═══ STEP 1 — Document Upload ═══ */
.doc-card {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 28px 32px;
  box-shadow: 0 2px 12px rgba(15,23,42,0.06);
  animation: slideInLeft 0.7s cubic-bezier(.4,0,.2,1) forwards;
  opacity: 0;
  max-width: 640px;
  margin: 0 auto;
}
@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-60px); }
  to   { opacity: 1; transform: translateX(0); }
}
.doc-header {
  text-align: center;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--navy);
  border-bottom: 2px solid var(--navy);
  padding-bottom: 10px;
  margin-bottom: 20px;
}
.doc-article {
  margin-bottom: 14px;
  font-size: 13px;
  line-height: 1.65;
  color: var(--navy-muted);
  padding: 8px 12px;
  border-left: 3px solid transparent;
  border-radius: 4px;
}
.doc-article strong { color: var(--navy); font-weight: 600; }
.scan-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 18px;
  font-size: 12px;
  font-weight: 600;
  color: var(--silver);
  opacity: 0;
  animation: fadeIn 0.5s 0.8s forwards;
}
.scan-dot {
  width: 6px; height: 6px;
  background: var(--navy-light);
  border-radius: 50%;
  animation: pulseDot 1.2s infinite;
}
@keyframes pulseDot {
  0%, 100% { opacity: 0.3; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.2); }
}
@keyframes fadeIn { to { opacity: 1; } }

/* ═══ STEP 2 — Clause Analysis ═══ */
.step2-layout {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}
.step2-doc {
  flex: 1;
  min-width: 0;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 24px 28px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 2px 12px rgba(15,23,42,0.06);
}
.scanner-line {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent, var(--navy-light), transparent);
  opacity: 0;
  z-index: 2;
}
.scanner-line.active {
  opacity: 1;
  animation: scanDown 2s ease-in-out forwards;
}
@keyframes scanDown {
  from { top: 0; }
  to   { top: 100%; }
}
.clause {
  font-size: 12.5px;
  line-height: 1.6;
  color: var(--navy-muted);
  padding: 8px 12px;
  margin-bottom: 10px;
  border-left: 3px solid transparent;
  border-radius: 4px;
  transition: border-color 0.5s, background 0.5s, box-shadow 0.5s;
  cursor: default;
  position: relative;
}
.clause strong { color: var(--navy); font-weight: 600; }
.clause.green  { border-color: var(--accent-green); background: #f0fdf4; }
.clause.amber  { border-color: var(--accent-amber); background: #fffbeb; }
.clause.red {
  border-color: var(--accent-red);
  background: #fef2f2;
  cursor: pointer;
}
.clause.red.pulse { animation: pulseRed 1.5s infinite; }
@keyframes pulseRed {
  0%, 100% { box-shadow: 0 0 0 0 rgba(220,38,38,0.25); }
  50%      { box-shadow: 0 0 0 8px rgba(220,38,38,0); }
}
.click-tooltip {
  position: absolute;
  top: -28px;
  right: 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--white);
  background: var(--accent-red);
  padding: 3px 10px;
  border-radius: 4px;
  opacity: 0;
  transition: opacity 0.3s;
  white-space: nowrap;
  pointer-events: none;
}
.click-tooltip::after {
  content: '';
  position: absolute;
  bottom: -5px;
  right: 16px;
  width: 0; height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid var(--accent-red);
}
.clause.red.pulse .click-tooltip { opacity: 1; }

/* Sidebar */
.sidebar {
  width: 260px;
  flex-shrink: 0;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 20px;
  opacity: 0;
  transform: translateX(40px);
  transition: opacity 0.5s, transform 0.5s;
  box-shadow: 0 2px 12px rgba(15,23,42,0.06);
}
.sidebar.visible { opacity: 1; transform: translateX(0); }
.sidebar-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--navy);
  margin-bottom: 14px;
}
.sidebar-stat {
  font-size: 12px;
  color: var(--navy-muted);
  margin-bottom: 10px;
}
.sidebar-stat span { font-weight: 700; color: var(--navy); }
.clause-list { list-style: none; margin: 14px 0; }
.clause-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  padding: 6px 0;
  border-bottom: 1px solid var(--surface);
  color: var(--navy-muted);
}
.badge {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.badge-green  { color: var(--accent-green); background: #dcfce7; }
.badge-amber  { color: var(--accent-amber); background: #fef3c7; }
.badge-red    { color: var(--accent-red);   background: #fee2e2; }
.risk-score {
  margin-top: 16px;
  padding: 10px 12px;
  border-radius: 8px;
  background: #fef2f2;
  border: 1px solid #fecaca;
  font-size: 12px;
  font-weight: 600;
  color: var(--accent-red);
  text-align: center;
}

/* AI Analysis Expand */
.ai-analysis {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.5s cubic-bezier(.4,0,.2,1), padding 0.3s;
  background: #fef2f2;
  border-radius: 0 0 8px 8px;
  margin: -4px 0 10px;
  border: 1px solid #fecaca;
  border-top: none;
  padding: 0 14px;
  font-size: 12px;
  line-height: 1.7;
  color: var(--navy-muted);
}
.ai-analysis.open { max-height: 300px; padding: 14px; }
.ai-analysis-title {
  font-weight: 700;
  color: var(--accent-red);
  font-size: 13px;
  margin-bottom: 8px;
}
.ai-analysis p { margin-bottom: 6px; }
.ai-suggestion {
  margin-top: 8px;
  padding: 8px 10px;
  background: var(--white);
  border-radius: 6px;
  border: 1px solid #fecaca;
  font-weight: 500;
  color: var(--navy);
}

/* ═══ STEP 3 — Jurisprudence ═══ */
.search-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px 18px;
  margin-bottom: 20px;
  box-shadow: 0 2px 12px rgba(15,23,42,0.06);
}
.search-icon { width: 18px; height: 18px; color: var(--silver); flex-shrink: 0; }
.search-text {
  font-size: 13px;
  color: var(--navy);
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
}
.search-text .typing {
  display: inline-block;
  border-right: 2px solid var(--navy-light);
  animation: blinkCaret 0.8s step-end infinite;
  overflow: hidden;
  white-space: nowrap;
}
@keyframes blinkCaret { 50% { border-color: transparent; } }

.result-card {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px 20px;
  margin-bottom: 12px;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s, transform 0.5s;
  box-shadow: 0 1px 6px rgba(15,23,42,0.04);
}
.result-card.visible { opacity: 1; transform: translateY(0); }
.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}
.result-cite { font-size: 13px; font-weight: 700; color: var(--navy); }
.relevance-wrap {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 600;
  color: var(--accent-green);
}
.relevance-bar {
  width: 60px;
  height: 5px;
  background: var(--surface-dark);
  border-radius: 3px;
  overflow: hidden;
}
.relevance-fill {
  height: 100%;
  background: var(--accent-green);
  border-radius: 3px;
  transition: width 1s ease;
  width: 0;
}
.result-excerpt {
  font-size: 12px;
  line-height: 1.6;
  color: var(--navy-muted);
  margin-top: 4px;
}

/* ═══ STEP 4 — Report ═══ */
.report {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 28px 32px;
  box-shadow: 0 2px 12px rgba(15,23,42,0.06);
  max-width: 680px;
  margin: 0 auto;
}
.report-section {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.5s, transform 0.5s;
  margin-bottom: 18px;
}
.report-section.visible { opacity: 1; transform: translateY(0); }
.report-title {
  font-size: 16px;
  font-weight: 700;
  color: var(--navy);
  border-bottom: 2px solid var(--navy);
  padding-bottom: 8px;
  margin-bottom: 16px;
}
.report-subtitle {
  font-size: 13px;
  font-weight: 700;
  color: var(--navy);
  margin-bottom: 8px;
}
.report-summary {
  font-size: 13px;
  line-height: 1.7;
  color: var(--navy-muted);
  padding: 12px 14px;
  background: var(--surface-light);
  border-radius: 8px;
  border: 1px solid var(--border);
}
.report-summary strong { color: var(--navy); }
.risk-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}
.risk-table th {
  text-align: left;
  font-weight: 700;
  color: var(--navy);
  padding: 8px 10px;
  background: var(--surface);
  border-bottom: 2px solid var(--border);
}
.risk-table td {
  padding: 8px 10px;
  border-bottom: 1px solid var(--surface-dark);
  color: var(--navy-muted);
  vertical-align: top;
}
.risk-table tr:last-child td { border-bottom: none; }
.changes-list {
  list-style: decimal;
  padding-left: 20px;
  font-size: 12.5px;
  line-height: 1.8;
  color: var(--navy-muted);
}
.changes-list li { margin-bottom: 4px; }
.report-footer {
  font-size: 11px;
  color: var(--silver);
  text-align: center;
  padding-top: 14px;
  border-top: 1px solid var(--surface-dark);
  margin-top: 10px;
}
.cta-wrap {
  text-align: center;
  margin-top: 28px;
  opacity: 0;
  transition: opacity 0.6s;
}
.cta-wrap.visible { opacity: 1; }
.cta-text {
  font-size: 15px;
  font-weight: 600;
  color: var(--navy);
  margin-bottom: 14px;
}
.cta-btn {
  display: inline-block;
  padding: 12px 36px;
  font-family: var(--font-body);
  font-size: 14px;
  font-weight: 700;
  color: var(--white);
  background: var(--navy-light);
  border: none;
  border-radius: 10px;
  cursor: pointer;
  animation: ctaPulse 2s infinite;
  transition: background 0.2s;
}
.cta-btn:hover { background: var(--navy); }
@keyframes ctaPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(30,58,95,0.35); }
  50%      { box-shadow: 0 0 0 12px rgba(30,58,95,0); }
}

/* ── Responsive ── */
@media (max-width: 680px) {
  .step2-layout { flex-direction: column; }
  .sidebar { width: 100%; transform: translateY(20px); }
  .sidebar.visible { transform: translateY(0); }
  .header { flex-wrap: wrap; gap: 8px; }
  .doc-card, .report { padding: 18px 16px; }
  .step2-doc { padding: 18px 16px; }
}
</style>
</head>
<body>

<!-- ─── HEADER ─── -->
<header class="header">
  <div class="header-left">
    <div class="logo">Praxis AI</div>
    <div class="demo-title" data-i18n="demoTitle">Analisi Contrattuale Intelligente</div>
  </div>
  <div class="demo-badge">DEMO</div>
</header>

<!-- ─── PROGRESS ─── -->
<div class="progress-wrap"><div class="progress-fill" id="progressFill"></div></div>
<div class="progress-label" id="progressLabel">Step 1 di 4</div>

<!-- ─── MAIN ─── -->
<main class="main">

  <!-- ═══ STEP 1 ═══ -->
  <section class="step active" id="step1">
    <div class="doc-card">
      <div class="doc-header" data-i18n="contractTitle">CONTRATTO DI LOCAZIONE COMMERCIALE</div>
      <div class="doc-article">
        <strong>Art. 1 &#8212; <span data-i18n="art1Label">Oggetto</span>:</strong>
        <span data-i18n="art1Text">Il Locatore concede in locazione al Conduttore l'immobile sito in Via Roma 42, Milano, composto da n. 3 locali ad uso commerciale per una superficie complessiva di 120 mq.</span>
      </div>
      <div class="doc-article">
        <strong>Art. 5 &#8212; <span data-i18n="art5Label">Canone</span>:</strong>
        <span data-i18n="art5Text">Il canone annuo di locazione e fissato in &#8364;48.000 (quarantottomila/00), da corrispondersi in rate mensili anticipate di &#8364;4.000 entro il giorno 5 di ogni mese.</span>
      </div>
      <div class="doc-article">
        <strong>Art. 8 &#8212; <span data-i18n="art8Label">Clausola penale</span>:</strong>
        <span data-i18n="art8Text">In caso di ritardo nel pagamento superiore a 15 giorni, il Conduttore sara tenuto al pagamento di una penale pari a &#8364;50.000 (cinquantamila/00) per ogni inadempimento.</span>
      </div>
      <div class="doc-article">
        <strong>Art. 12 &#8212; <span data-i18n="art12Label">Durata</span>:</strong>
        <span data-i18n="art12Text">Il presente contratto ha durata di 6+6 anni con decorrenza dal 01/03/2024. Il rinnovo e automatico salvo disdetta con preavviso di 12 mesi.</span>
      </div>
    </div>
    <div class="scan-indicator">
      <span class="scan-dot"></span>
      <span data-i18n="scanning">AI scanning...</span>
    </div>
    <button class="next-btn" data-i18n="next" onclick="goNext()">Avanti</button>
  </section>

  <!-- ═══ STEP 2 ═══ -->
  <section class="step" id="step2">
    <div class="step2-layout">
      <div class="step2-doc">
        <div class="scanner-line" id="scannerLine"></div>
        <div class="clause" id="cl1">
          <strong>Art. 1 &#8212; <span data-i18n="art1Label2">Oggetto</span>:</strong>
          <span data-i18n="art1Short">Il Locatore concede in locazione al Conduttore l'immobile sito in Via Roma 42, Milano...</span>
        </div>
        <div class="clause" id="cl5">
          <strong>Art. 5 &#8212; <span data-i18n="art5Label2">Canone</span>:</strong>
          <span data-i18n="art5Short">Il canone annuo di locazione e fissato in &#8364;48.000...</span>
        </div>
        <div class="clause" id="cl8">
          <strong>Art. 8 &#8212; <span data-i18n="art8Label2">Clausola penale</span>:</strong>
          <span data-i18n="art8Short">Il Conduttore sara tenuto al pagamento di una penale pari a &#8364;50.000...</span>
          <span class="click-tooltip" data-i18n="clickAnalysis">Clicca per analisi</span>
        </div>
        <div class="ai-analysis" id="aiAnalysis">
          <div class="ai-analysis-title" data-i18n="analysisTitle">&#9888; Clausola Penale Eccessiva</div>
          <p data-i18n="analysisP1">L'importo della penale (&#8364;50.000) supera il 30% del valore contrattuale annuo (&#8364;48.000). Il rapporto penale/canone e pari al 104%.</p>
          <p data-i18n="analysisP2">Riferimento: Art. 1382 c.c. &#8212; La clausola penale puo essere ridotta dal giudice se manifestamente eccessiva (Art. 1384 c.c.).</p>
          <div class="ai-suggestion" data-i18n="analysisSuggestion">Suggerimento: Ridurre la penale a un importo proporzionato (es. &#8364;14.400, pari al 30% del canone annuo).</div>
        </div>
        <div class="clause" id="cl12">
          <strong>Art. 12 &#8212; <span data-i18n="art12Label2">Durata</span>:</strong>
          <span data-i18n="art12Short">Il presente contratto ha durata di 6+6 anni con decorrenza dal 01/03/2024...</span>
        </div>
      </div>
      <div class="sidebar" id="sidebar">
        <div class="sidebar-title" data-i18n="sidebarTitle">Analisi Clausole</div>
        <div class="sidebar-stat"><span data-i18n="clausesFound">Clausole Identificate:</span> <span>4</span></div>
        <ul class="clause-list">
          <li>Art. 1 <span class="badge badge-green" data-i18n="badgeOk1">Conforme</span></li>
          <li>Art. 5 <span class="badge badge-green" data-i18n="badgeOk2">Conforme</span></li>
          <li>Art. 8 <span class="badge badge-red" data-i18n="badgeRisk1">Rischio</span></li>
          <li>Art. 12 <span class="badge badge-amber" data-i18n="badgeWarn1">Attenzione</span></li>
        </ul>
        <div class="risk-score" data-i18n="riskScore">Rischio Complessivo: Medio-Alto</div>
      </div>
    </div>
    <button class="next-btn" data-i18n="next2" onclick="goNext()">Avanti</button>
  </section>

  <!-- ═══ STEP 3 ═══ -->
  <section class="step" id="step3">
    <div class="search-bar">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <div class="search-text"><span class="typing" id="searchTyping"></span></div>
    </div>
    <div class="result-card" id="res1">
      <div class="result-header">
        <span class="result-cite">Cass. Civ. Sez. III, n. 18128/2023</span>
        <span class="relevance-wrap">94% <span class="relevance-bar"><span class="relevance-fill" data-width="94"></span></span></span>
      </div>
      <div class="result-excerpt" data-i18n="res1Text">La penale che supera il 30% del valore contrattuale e soggetta a riduzione ex Art. 1384 c.c. Il giudice puo intervenire d'ufficio.</div>
    </div>
    <div class="result-card" id="res2">
      <div class="result-header">
        <span class="result-cite">Trib. Milano, Sez. XIII, n. 4521/2022</span>
        <span class="relevance-wrap">87% <span class="relevance-bar"><span class="relevance-fill" data-width="87"></span></span></span>
      </div>
      <div class="result-excerpt" data-i18n="res2Text">Criterio di proporzionalita nella determinazione della clausola penale. La penale deve essere parametrata al danno prevedibile al momento della stipulazione.</div>
    </div>
    <div class="result-card" id="res3">
      <div class="result-header">
        <span class="result-cite">Cass. Civ. Sez. II, n. 7612/2021</span>
        <span class="relevance-wrap">82% <span class="relevance-bar"><span class="relevance-fill" data-width="82"></span></span></span>
      </div>
      <div class="result-excerpt" data-i18n="res3Text">Onere della prova nella richiesta di riduzione della penale. Grava sul debitore dimostrare la manifesta eccessivita della clausola rispetto al danno effettivo.</div>
    </div>
    <button class="next-btn" data-i18n="next3" onclick="goNext()">Avanti</button>
  </section>

  <!-- ═══ STEP 4 ═══ -->
  <section class="step" id="step4">
    <div class="report">
      <div class="report-section" id="rptTitle">
        <div class="report-title" data-i18n="reportTitle">Report Analisi Contrattuale</div>
        <div style="font-size:12px;color:var(--silver);margin-top:-10px;margin-bottom:8px;" data-i18n="reportSubDoc">Contratto di Locazione Commerciale &#8212; Via Roma 42, Milano</div>
      </div>
      <div class="report-section" id="rptSummary">
        <div class="report-subtitle" data-i18n="execSummary">Riepilogo Esecutivo</div>
        <div class="report-summary" id="execSummaryBody"></div>
      </div>
      <div class="report-section" id="rptMatrix">
        <div class="report-subtitle" data-i18n="riskMatrix">Matrice di Rischio</div>
        <table class="risk-table">
          <thead>
            <tr>
              <th data-i18n="thClause">Clausola</th>
              <th data-i18n="thRisk">Rischio</th>
              <th data-i18n="thAction">Azione Raccomandata</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Art. 1</td>
              <td><span class="badge badge-green" data-i18n="tblOk1">Conforme</span></td>
              <td data-i18n="actionNone1">Nessuna</td>
            </tr>
            <tr>
              <td>Art. 5</td>
              <td><span class="badge badge-green" data-i18n="tblOk2">Conforme</span></td>
              <td data-i18n="actionNone2">Nessuna</td>
            </tr>
            <tr>
              <td>Art. 8</td>
              <td><span class="badge badge-red" data-i18n="tblRisk">Rischio</span></td>
              <td data-i18n="actionReduce">Riduzione penale a &#8364;14.400</td>
            </tr>
            <tr>
              <td>Art. 12</td>
              <td><span class="badge badge-amber" data-i18n="tblWarn">Attenzione</span></td>
              <td data-i18n="actionVerify">Verificare clausola di rinnovo</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="report-section" id="rptChanges">
        <div class="report-subtitle" data-i18n="suggestedChanges">Modifiche Consigliate</div>
        <ol class="changes-list">
          <li data-i18n="change1">Ridurre la clausola penale (Art. 8) da &#8364;50.000 a &#8364;14.400, importo pari al 30% del canone annuo, in conformita con la giurisprudenza prevalente.</li>
          <li data-i18n="change2">Specificare all'Art. 12 le condizioni di rinnovo automatico e i criteri di aggiornamento del canone (es. indice ISTAT).</li>
          <li data-i18n="change3">Aggiungere una clausola di mediazione obbligatoria prima dell'azione giudiziaria, in ottemperanza al D.Lgs. 28/2010.</li>
        </ol>
      </div>
      <div class="report-section" id="rptFooter">
        <div class="report-footer">
          <span data-i18n="reportFooter">Report generato da Praxis AI</span> &#8212; <span id="reportDate"></span>
        </div>
      </div>
    </div>
    <div class="cta-wrap" id="ctaWrap">
      <div class="cta-text" data-i18n="ctaText">Vuoi provare con i tuoi contratti?</div>
      <button class="cta-btn" data-i18n="ctaBtn">Inizia Ora</button>
    </div>
  </section>

</main>

<script>
(function() {
  'use strict';

  /* ──────────── i18n ──────────── */
  var rawLocale = (typeof window.__PRAXIS_LOCALE__ === 'string') ? window.__PRAXIS_LOCALE__ : 'it';
  var locale = rawLocale.substring(0, 2);

  var T = {
    it: {
      demoTitle: 'Analisi Contrattuale Intelligente',
      contractTitle: 'CONTRATTO DI LOCAZIONE COMMERCIALE',
      art1Label: 'Oggetto', art1Label2: 'Oggetto',
      art1Text: "Il Locatore concede in locazione al Conduttore l'immobile sito in Via Roma 42, Milano, composto da n. 3 locali ad uso commerciale per una superficie complessiva di 120 mq.",
      art1Short: "Il Locatore concede in locazione al Conduttore l'immobile sito in Via Roma 42, Milano...",
      art5Label: 'Canone', art5Label2: 'Canone',
      art5Text: "Il canone annuo di locazione e fissato in \u20ac48.000 (quarantottomila/00), da corrispondersi in rate mensili anticipate di \u20ac4.000 entro il giorno 5 di ogni mese.",
      art5Short: "Il canone annuo di locazione e fissato in \u20ac48.000...",
      art8Label: 'Clausola penale', art8Label2: 'Clausola penale',
      art8Text: "In caso di ritardo nel pagamento superiore a 15 giorni, il Conduttore sara tenuto al pagamento di una penale pari a \u20ac50.000 (cinquantamila/00) per ogni inadempimento.",
      art8Short: "Il Conduttore sara tenuto al pagamento di una penale pari a \u20ac50.000...",
      art12Label: 'Durata', art12Label2: 'Durata',
      art12Text: "Il presente contratto ha durata di 6+6 anni con decorrenza dal 01/03/2024. Il rinnovo e automatico salvo disdetta con preavviso di 12 mesi.",
      art12Short: "Il presente contratto ha durata di 6+6 anni con decorrenza dal 01/03/2024...",
      scanning: 'AI scanning...',
      next: 'Avanti', next2: 'Avanti', next3: 'Avanti',
      clickAnalysis: 'Clicca per analisi',
      analysisTitle: '\u26a0 Clausola Penale Eccessiva',
      analysisP1: "L'importo della penale (\u20ac50.000) supera il 30% del valore contrattuale annuo (\u20ac48.000). Il rapporto penale/canone e pari al 104%.",
      analysisP2: "Riferimento: Art. 1382 c.c. \u2014 La clausola penale puo essere ridotta dal giudice se manifestamente eccessiva (Art. 1384 c.c.).",
      analysisSuggestion: "Suggerimento: Ridurre la penale a un importo proporzionato (es. \u20ac14.400, pari al 30% del canone annuo).",
      sidebarTitle: 'Analisi Clausole',
      clausesFound: 'Clausole Identificate:',
      badgeOk1: 'Conforme', badgeOk2: 'Conforme',
      badgeRisk1: 'Rischio', badgeWarn1: 'Attenzione',
      riskScore: 'Rischio Complessivo: Medio-Alto',
      searchQuery: 'clausola penale eccessiva locazione commerciale',
      searchLabel: 'Ricerca: ',
      res1Text: "La penale che supera il 30% del valore contrattuale e soggetta a riduzione ex Art. 1384 c.c. Il giudice puo intervenire d'ufficio.",
      res2Text: "Criterio di proporzionalita nella determinazione della clausola penale. La penale deve essere parametrata al danno prevedibile al momento della stipulazione.",
      res3Text: "Onere della prova nella richiesta di riduzione della penale. Grava sul debitore dimostrare la manifesta eccessivita della clausola rispetto al danno effettivo.",
      reportTitle: 'Report Analisi Contrattuale',
      reportSubDoc: 'Contratto di Locazione Commerciale \u2014 Via Roma 42, Milano',
      execSummary: 'Riepilogo Esecutivo',
      execSummaryHTML: '<strong>4</strong> clausole analizzate. <strong>1</strong> rischio critico identificato (Art. 8 \u2014 Clausola penale eccessiva). <strong>1</strong> clausola da verificare (Art. 12 \u2014 Durata e rinnovo). <strong>2</strong> clausole conformi alla normativa vigente.',
      riskMatrix: 'Matrice di Rischio',
      thClause: 'Clausola', thRisk: 'Rischio', thAction: 'Azione Raccomandata',
      tblOk1: 'Conforme', tblOk2: 'Conforme',
      tblRisk: 'Rischio', tblWarn: 'Attenzione',
      actionNone1: 'Nessuna', actionNone2: 'Nessuna',
      actionReduce: "Riduzione penale a \u20ac14.400",
      actionVerify: 'Verificare clausola di rinnovo',
      suggestedChanges: 'Modifiche Consigliate',
      change1: "Ridurre la clausola penale (Art. 8) da \u20ac50.000 a \u20ac14.400, importo pari al 30% del canone annuo, in conformita con la giurisprudenza prevalente.",
      change2: "Specificare all'Art. 12 le condizioni di rinnovo automatico e i criteri di aggiornamento del canone (es. indice ISTAT).",
      change3: "Aggiungere una clausola di mediazione obbligatoria prima dell'azione giudiziaria, in ottemperanza al D.Lgs. 28/2010.",
      reportFooter: 'Report generato da Praxis AI',
      ctaText: 'Vuoi provare con i tuoi contratti?',
      ctaBtn: 'Inizia Ora',
      stepOf: 'di'
    },
    en: {
      demoTitle: 'Intelligent Contract Analysis',
      contractTitle: 'COMMERCIAL LEASE AGREEMENT',
      art1Label: 'Subject', art1Label2: 'Subject',
      art1Text: "The Landlord leases to the Tenant the property located at Via Roma 42, Milan, consisting of 3 commercial-use premises with a total area of 120 sqm.",
      art1Short: "The Landlord leases to the Tenant the property at Via Roma 42, Milan...",
      art5Label: 'Rent', art5Label2: 'Rent',
      art5Text: "The annual rent is set at \u20ac48,000 (forty-eight thousand/00), payable in advance monthly installments of \u20ac4,000 by the 5th of each month.",
      art5Short: "The annual rent is set at \u20ac48,000...",
      art8Label: 'Penalty clause', art8Label2: 'Penalty clause',
      art8Text: "In case of payment delay exceeding 15 days, the Tenant shall pay a penalty of \u20ac50,000 (fifty thousand/00) for each breach.",
      art8Short: "The Tenant shall pay a penalty of \u20ac50,000...",
      art12Label: 'Duration', art12Label2: 'Duration',
      art12Text: "This agreement has a duration of 6+6 years starting 01/03/2024. Renewal is automatic unless terminated with 12 months' notice.",
      art12Short: "This agreement has a duration of 6+6 years starting 01/03/2024...",
      scanning: 'AI scanning...',
      next: 'Next', next2: 'Next', next3: 'Next',
      clickAnalysis: 'Click for analysis',
      analysisTitle: '\u26a0 Excessive Penalty Clause',
      analysisP1: "The penalty amount (\u20ac50,000) exceeds 30% of the annual contract value (\u20ac48,000). The penalty/rent ratio is 104%.",
      analysisP2: "Reference: Art. 1382 Civil Code \u2014 The penalty clause may be reduced by the court if manifestly excessive (Art. 1384 Civil Code).",
      analysisSuggestion: "Suggestion: Reduce the penalty to a proportionate amount (e.g. \u20ac14,400, equal to 30% of the annual rent).",
      sidebarTitle: 'Clause Analysis',
      clausesFound: 'Clauses Identified:',
      badgeOk1: 'Compliant', badgeOk2: 'Compliant',
      badgeRisk1: 'Risk', badgeWarn1: 'Warning',
      riskScore: 'Overall Risk: Medium-High',
      searchQuery: 'excessive penalty clause commercial lease',
      searchLabel: 'Search: ',
      res1Text: "A penalty exceeding 30% of the contract value is subject to reduction under Art. 1384 Civil Code. The court may intervene ex officio.",
      res2Text: "Proportionality criterion in determining the penalty clause. The penalty must be calibrated to the foreseeable damage at the time of execution.",
      res3Text: "Burden of proof in requesting penalty reduction. The debtor must demonstrate the manifest excessiveness of the clause compared to actual damage.",
      reportTitle: 'Contract Analysis Report',
      reportSubDoc: 'Commercial Lease Agreement \u2014 Via Roma 42, Milan',
      execSummary: 'Executive Summary',
      execSummaryHTML: '<strong>4</strong> clauses analyzed. <strong>1</strong> critical risk identified (Art. 8 \u2014 Excessive penalty clause). <strong>1</strong> clause to verify (Art. 12 \u2014 Duration and renewal). <strong>2</strong> clauses compliant with current regulations.',
      riskMatrix: 'Risk Matrix',
      thClause: 'Clause', thRisk: 'Risk', thAction: 'Recommended Action',
      tblOk1: 'Compliant', tblOk2: 'Compliant',
      tblRisk: 'Risk', tblWarn: 'Warning',
      actionNone1: 'None', actionNone2: 'None',
      actionReduce: "Reduce penalty to \u20ac14,400",
      actionVerify: 'Verify renewal clause',
      suggestedChanges: 'Suggested Changes',
      change1: "Reduce the penalty clause (Art. 8) from \u20ac50,000 to \u20ac14,400, an amount equal to 30% of the annual rent, in line with prevailing case law.",
      change2: "Specify in Art. 12 the automatic renewal conditions and rent update criteria (e.g. ISTAT index).",
      change3: "Add a mandatory mediation clause before legal action, in compliance with Legislative Decree 28/2010.",
      reportFooter: 'Report generated by Praxis AI',
      ctaText: 'Want to try with your own contracts?',
      ctaBtn: 'Start Now',
      stepOf: 'of'
    }
  };

  function lang() { return (locale === 'en') ? 'en' : 'it'; }
  function t(key) { return T[lang()][key]; }

  function applyI18n() {
    var l = lang();
    document.querySelectorAll('[data-i18n]').forEach(function(el) {
      var key = el.getAttribute('data-i18n');
      if (T[l] && T[l][key] !== undefined) {
        el.textContent = T[l][key];
      }
    });
    var summaryEl = document.getElementById('execSummaryBody');
    if (summaryEl) summaryEl.innerHTML = T[l].execSummaryHTML;
    updateProgressLabel();
  }

  /* ──────────── State ──────────── */
  var currentStep = 1;
  var totalSteps = 4;
  var transitioning = false;
  var clause8Clicked = false;

  function updateProgressLabel() {
    document.getElementById('progressLabel').textContent =
      'Step ' + currentStep + ' ' + t('stepOf') + ' ' + totalSteps;
    document.getElementById('progressFill').style.width =
      (currentStep / totalSteps * 100) + '%';
  }

  /* ──────────── Step Transitions ──────────── */
  function goNext() {
    if (transitioning || currentStep >= totalSteps) return;
    transitioning = true;
    var curr = document.getElementById('step' + currentStep);
    curr.classList.remove('visible');
    setTimeout(function() {
      curr.classList.remove('active');
      currentStep++;
      updateProgressLabel();
      var next = document.getElementById('step' + currentStep);
      next.classList.add('active');
      void next.offsetWidth;
      setTimeout(function() {
        next.classList.add('visible');
        transitioning = false;
        initStep(currentStep);
      }, 50);
    }, 400);
  }
  window.goNext = goNext;

  /* ──────────── Step Initializers ──────────── */
  function initStep(n) {
    if (n === 2) initStep2();
    if (n === 3) initStep3();
    if (n === 4) initStep4();
  }

  /* ─── Step 2: Scanner + Clause highlighting ─── */
  function initStep2() {
    var scanner = document.getElementById('scannerLine');
    scanner.classList.add('active');
    setTimeout(function() { document.getElementById('cl1').classList.add('green'); }, 800);
    setTimeout(function() { document.getElementById('cl5').classList.add('green'); }, 1200);
    setTimeout(function() {
      var cl8 = document.getElementById('cl8');
      cl8.classList.add('red');
      cl8.classList.add('pulse');
    }, 1600);
    setTimeout(function() { document.getElementById('cl12').classList.add('amber'); }, 2000);
    setTimeout(function() {
      document.getElementById('sidebar').classList.add('visible');
    }, 2400);

    document.getElementById('cl8').addEventListener('click', function handler() {
      if (clause8Clicked) return;
      clause8Clicked = true;
      document.getElementById('cl8').classList.remove('pulse');
      document.getElementById('aiAnalysis').classList.add('open');
      document.getElementById('cl8').removeEventListener('click', handler);
    });
  }

  /* ─── Step 3: Search animation + results ─── */
  function initStep3() {
    var query = t('searchLabel') + t('searchQuery');
    var typingEl = document.getElementById('searchTyping');
    var i = 0;
    typingEl.textContent = '';

    function typeChar() {
      if (i < query.length) {
        typingEl.textContent = query.substring(0, i + 1);
        i++;
        setTimeout(typeChar, 35);
      } else {
        setTimeout(function() { showResult('res1'); }, 400);
        setTimeout(function() { showResult('res2'); }, 900);
        setTimeout(function() { showResult('res3'); }, 1400);
      }
    }
    typeChar();
  }

  function showResult(id) {
    var card = document.getElementById(id);
    card.classList.add('visible');
    var fill = card.querySelector('.relevance-fill');
    if (fill) {
      setTimeout(function() {
        fill.style.width = fill.getAttribute('data-width') + '%';
      }, 100);
    }
  }

  /* ─── Step 4: Report sections fade in ─── */
  function initStep4() {
    var now = new Date();
    var dateStr = now.toLocaleDateString(
      (locale === 'en') ? 'en-GB' : 'it-IT',
      { day: '2-digit', month: '2-digit', year: 'numeric' }
    );
    document.getElementById('reportDate').textContent = dateStr;

    var sections = ['rptTitle', 'rptSummary', 'rptMatrix', 'rptChanges', 'rptFooter'];
    sections.forEach(function(id, idx) {
      setTimeout(function() {
        document.getElementById(id).classList.add('visible');
      }, 300 + idx * 500);
    });
    setTimeout(function() {
      document.getElementById('ctaWrap').classList.add('visible');
    }, 300 + sections.length * 500 + 300);
  }

  /* ──────────── CTA Button (sandbox-safe) ──────────── */
  function initCtaButton() {
    var ctaBtn = document.querySelector('.cta-btn');
    if (ctaBtn) {
      ctaBtn.addEventListener('click', function(e) {
        e.preventDefault();
        ctaBtn.style.animation = 'none';
        ctaBtn.style.background = 'var(--accent-green)';
        ctaBtn.textContent = '\u2713 ' + (lang() === 'en' ? 'Thank you! We will contact you soon' : 'Grazie! Vi contatteremo presto');
        ctaBtn.style.cursor = 'default';
        ctaBtn.disabled = true;
      });
    }
  }

  /* ──────────── Init ──────────── */
  document.addEventListener('DOMContentLoaded', function() {
    applyI18n();
    initCtaButton();
    var step1 = document.getElementById('step1');
    void step1.offsetWidth;
    setTimeout(function() { step1.classList.add('visible'); }, 100);
  });
})();
</script>
</body>
</html>
